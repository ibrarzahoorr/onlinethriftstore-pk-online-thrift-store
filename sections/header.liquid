<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-notification.css' | asset_url }}" media="print" onload="this.media='all'">

{%- if settings.predictive_search_enabled -%}
  <link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

<style>
  /* Modern Elegant Font */
  body, .header, .list-menu, .menu-banner, .header__icons, .header__heading-link {
    font-family: 'Poppins', 'Inter', 'Roboto', sans-serif !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    letter-spacing: 0.5px;
    text-transform: capitalize;
    color: #111 !important;
  }

  /* Full width header - no margins */
  .header, .page-width {
    max-width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* Remove menu dots */
  .list-menu,
  .list-menu li {
    list-style: none !important;
    margin: 0;
    padding: 0;
  }

  /* Collection banner images under menu */
  .menu-banner {
    margin-top: 0.5rem;
    text-align: center;
  }
  .menu-banner img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #000;
    transition: transform 0.3s ease;
  }
  .menu-banner img:hover {
    transform: scale(1.1);
  }

  /* Logo position classes */
  .header__heading--left   { justify-content: flex-start; text-align: left; display:flex; }
  .header__heading--center { justify-content: center; text-align: center; display:flex; }
  .header__heading--right  { justify-content: flex-end; text-align: right; display:flex; }

  /* Icons position classes */
  .header__icons--left   { justify-content: flex-start; display:flex; gap:10px; }
  .header__icons--center { justify-content: center; display:flex; gap:10px; }
  .header__icons--right  { justify-content: flex-end; display:flex; gap:10px; }
</style>

<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

{% liquid
  assign header_tag = 'div'
  if section.settings.sticky_header_type != 'none'
    assign header_tag = 'sticky-header'
  endif
%}

<{{ header_tag }}
  {% if header_tag == 'sticky-header' %}
    data-sticky-type="{{ section.settings.sticky_header_type }}"
  {% endif %}
  class="header-wrapper color-{{ section.settings.color_scheme }}{% if section.settings.show_line_separator %} header-wrapper--border-bottom{% endif %}"
>
  <header class="header page-width{% if section.settings.menu_type_desktop == 'drawer' %} drawer-menu{% endif %}{% if section.settings.menu != blank %} header--has-menu{% endif %}">
    
    {%- if section.settings.menu != blank -%}
      {% render 'header-drawer' %}
    {%- endif -%}

    <!-- Logo -->
    <div class="header__heading header__heading--{{ section.settings.logo_position }}">
      <a href="{{ routes.root_url }}" class="header__heading-link link link--text focus-inset">
        {% if settings.logo != blank %}
          <div class="header__heading-logo-wrapper">
            {{ settings.logo | image_url: width: 300 | image_tag: class: 'header__heading-logo', alt: shop.name }}
          </div>
        {% else %}
          <span class="h2">{{ shop.name }}</span>
        {% endif %}
      </a>
    </div>

    <!-- Icons -->
    <div class="header__icons header__icons--{{ section.settings.icons_position }}">
      {% if section.settings.show_search %}
        {% render 'header-search', input_id: 'Search-In-Modal' %}
      {% endif %}

      {% if section.settings.show_account and shop.customer_accounts_enabled %}
        <a href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}" class="header__icon header__icon--account">
          <span class="svg-wrapper">{{ 'icon-account.svg' | inline_asset_content }}</span>
        </a>
      {% endif %}

      {% if section.settings.show_cart %}
        <a href="{{ routes.cart_url }}" class="header__icon header__icon--cart" id="cart-icon-bubble">
          <span class="svg-wrapper">
            {% if cart == empty %}
              {{ 'icon-cart-empty.svg' | inline_asset_content }}
            {% else %}
              {{ 'icon-cart.svg' | inline_asset_content }}
            {% endif %}
          </span>
          {% if cart != empty %}
            <div class="cart-count-bubble"><span>{{ cart.item_count }}</span></div>
          {% endif %}
        </a>
      {% endif %}
    </div>
  </header>
</{{ header_tag }}>

{%- if settings.cart_type == 'notification' -%}
  {%- render 'cart-notification',
    color_scheme: section.settings.color_scheme,
    desktop_menu_type: section.settings.menu_type_desktop
  -%}
{%- endif -%}

{% schema %}
{
  "name": "Advanced Header",
  "class": "section-header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu"
    },
    {
      "type": "select",
      "id": "menu_type_desktop",
      "options": [
        { "value": "dropdown", "label": "Dropdown" },
        { "value": "mega", "label": "Mega Menu" },
        { "value": "drawer", "label": "Drawer" }
      ],
      "default": "dropdown",
      "label": "Desktop menu type"
    },
    {
      "type": "select",
      "id": "sticky_header_type",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "on-scroll-up", "label": "On Scroll Up" },
        { "value": "always", "label": "Always Sticky" },
        { "value": "reduce-logo-size", "label": "Shrink on Scroll" }
      ],
      "default": "on-scroll-up",
      "label": "Sticky header type"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "scheme-1",
      "label": "Color scheme"
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo Position",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show Search Icon",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_account",
      "label": "Show Account Icon",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_cart",
      "label": "Show Cart Icon",
      "default": true
    },
    {
      "type": "select",
      "id": "icons_position",
      "label": "Icons Position",
      "default": "right",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "collection_banner",
      "name": "Collection Banner",
      "settings": [
        {
          "type": "text",
          "id": "menu_item",
          "label": "Menu Item Name (exact match)"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Banner Image"
        },
        {
          "type": "text",
          "id": "alt",
          "label": "Image Alt Text"
        }
      ]
    }
  ]
}
{% endschema %}
